<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convertisseur Base64</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen transition-colors duration-300" id="body">
    <div class="absolute top-4 right-4">
        <button id="themeToggle" class="bg-gray-700 text-white px-4 py-2 rounded">üåô</button>
    </div>
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg w-full animate-fadeIn" id="container">
        <h2 class="text-2xl font-bold mb-4">Convertisseur Base64</h2>
        <input type="file" id="fileInput" class="block w-full mb-4 bg-gray-700 p-2 rounded" accept="image/*">
        <textarea id="output" class="w-full h-40 bg-gray-700 p-2 rounded" readonly></textarea>
        <button id="copyBtn" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded w-full">Copier</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const fileInput = document.getElementById('fileInput');
            const output = document.getElementById('output');
            const copyBtn = document.getElementById('copyBtn');
            const body = document.getElementById('body');
            const container = document.getElementById('container');
            const themeToggle = document.getElementById('themeToggle');

            fileInput.addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        // Cr√©ation d'un canvas pour redimensionner l'image
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        const maxWidth = 800; // Limite de largeur
                        const maxHeight = 600; // Limite de hauteur

                        // Calcul de la nouvelle taille tout en gardant les proportions
                        let width = img.width;
                        let height = img.height;
                        if (width > height) {
                            if (width > maxWidth) {
                                height *= maxWidth / width;
                                width = maxWidth;
                            }
                        } else {
                            if (height > maxHeight) {
                                width *= maxHeight / height;
                                height = maxHeight;
                            }
                        }

                        canvas.width = width;
                        canvas.height = height;
                        
                        // Dessiner l'image redimensionn√©e sur le canvas
                        ctx.drawImage(img, 0, 0, width, height);

                        // Convertir l'image du canvas en Base64
                        const base64 = canvas.toDataURL(file.type); // Le type d'image est r√©cup√©r√© depuis le fichier

                        // G√©n√©rer la balise <img> avec le Base64
                        const imgTag = `<img src="${base64}" />`;
                        output.value = imgTag;
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            });

            copyBtn.addEventListener('click', function() {
                output.select();
                navigator.clipboard.writeText(output.value).then(() => {
                    alert('Code copi√© !');
                });
            });

            themeToggle.addEventListener('click', function() {
                if (body.classList.contains('bg-gray-900')) {
                    body.classList.replace('bg-gray-900', 'bg-white');
                    body.classList.replace('text-white', 'text-gray-900');
                    container.classList.replace('bg-gray-800', 'bg-gray-200');
                    themeToggle.textContent = '‚òÄÔ∏è';
                } else {
                    body.classList.replace('bg-white', 'bg-gray-900');
                    body.classList.replace('text-gray-900', 'text-white');
                    container.classList.replace('bg-gray-200', 'bg-gray-800');
                    themeToggle.textContent = 'üåô';
                }
            });
        });
    </script>
</body>
</html>
